<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      xmlns:i18n="http://genshi.edgewall.org/i18n"
      i18n:domain="inieditorpanel"
      xmlns:py="http://genshi.edgewall.org/">
  <xi:include href="admin.html" />
  <head>
    <title>DoyygenPlugin Settings (Doxyfile)</title>
    <script type='application/javascript'>
      function toggle_display_next(node) {
      node.nextElementSibling.style.display=node.nextElementSibling.style.display=='none' ? 'block' : 'none'
      }
      function check_dir(form, name) {
        var d = form.elements[name]
        var def = d.previousElementSibling
        // check for a prefix default value
        if (def.tagName == 'SPAN') {
      		// add it in front, except if already there
		var r = new RegExp('^' + def.firstChild.data)
		if (!r.test(d.value)) {
			d.value = def.firstChild.data + d.value;
		}
	}
        if (/[.][.]/.test(d.value) || !d.value) {
      		alert("'" + d.value + "': incorrect value for " + name)
      		return false
        }
	return true
      }
    </script>
  </head>
  <body>
    <div class="toparea">
      <div py:if="msg">
	<span class="arrow" onclick="toggle_display_next(this)">► ${msg}
	</span><pre style='display: none'>
	  ${trace}
	</pre>
      </div>
      <h2 class="doxygenplugin">Doxyfile Generator</h2>
      <div id="select_section_form" py:if="fieldsets">
        <form action=""
	      method="post"
	      onsubmit="return !(!check_dir(this, 'OUTPUT_DIRECTORY') || !check_dir(this, 'INPUT'))"
	      enctype="multipart/form-data;charset=UTF-8" >
	  <fieldset py:for="k,d in fieldsets.iteritems()">
	    <legend class="doxygenplugin arrow" onclick="toggle_display_next(this)">► ${k}</legend>
	    <div style='display:${d.display}'>
	      <div py:for="id,s in d.opt.iteritems()" class="labelinput ${s.atclass}">
		<label for="${id}" class="arrow" onclick="toggle_display_next(this)">► ${id}
		</label><pre style='display:none'>${s.label}</pre>
		<span py:if="s.default"
		      >${s.default}</span><input id="${id}" name="${id}" value="${s.value}" size="${s.size}" />
	      </div>
	    </div>
	  </fieldset>
          <div><input type="submit" /></div>
        </form>
      </div>
    </div>
  </body>
</html>
