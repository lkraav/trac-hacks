    <div xmlns:py="http://genshi.edgewall.org/">
        <py:choose test="invalid">
          <div py:when="0" id="${fileID+'_'+lineNum}" class="comment-tree-div">
              ${commentHTML}
              <div py:if="not is_finished and not review_locked" class="buttons">
                  <input type="button" name="addcomment" value="Add New Comment"
                         id="${'addcomment-view'+lineNum}"/>
                  <input type="hidden" name="fileid" value="" id="${'comment-fileid-view'+lineNum}"/>
                  <input type="hidden" name="line" value="" id="${'comment-line-view'+lineNum}" />
              </div>
              <p py:if="is_finished or review_locked" class="help">
                  This review is locked. You can't add any comments.
              </p>
          </div>

          <span py:when="1">Invalid Parameters</span>
          <span py:when="2">Comment Text Blank</span>
          <span py:when="3">Invalid Action Type</span>
          <span py:when="4">Invalid Permission</span>
          <span py:when="closed">Review already closed</span>
          <div py:when="5" id="${fileID+'_'+lineNum}">
                <table width="100%" id="addCommentTable">
                  <tr>
                    <td align="center">
                      <textarea cols="31" rows="6" id="addCommentText"></textarea>
                    </td>
                  </tr>
                  <tr height="3px">
                    <td> </td>
                  </tr>
                  <tr>
                    <td>&nbsp;&nbsp;Attach Code Sample <input type="checkbox" onclick="showHideAttachFile();" value="Attach Code Sample" id="attachFileCheckbox" /></td>
                  </tr>
                  <tr height="5px">
                    <td> </td>
                  </tr>
                  <tr>
                    <td align="right">
                <form action="${href.peerReviewCommentCallback()}" method="post" id="HiddenCommentForm" name="HiddenCommentForm" enctype="multipart/form-data">
                  <input type="hidden" value="addComment" id="actionType" name="actionType" />
                  <input type="hidden" value="" id="IDFile" name="IDFile" />
                  <input type="hidden" value="" id="LineNum" name="LineNum" />
                  <input type="hidden" value="" id="IDParent" name="IDParent" />
                  <input type="hidden" value="" id="Text" name="Text" />
                  <input size="25" type="file" value="" id="FileUp" name="FileUp" style="display:none;" />
                  <span id="FileUpCompanion" style="display:none;">&nbsp;</span>
                </form>
                    </td>
                  </tr>
                  <tr>
                    <td align="right" colspan="2" id="AddCommentButtonArea" />
                  </tr>
                </table>
          </div>
        </py:choose>
    </div>

