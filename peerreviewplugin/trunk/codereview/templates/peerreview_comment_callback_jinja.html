    <div>

        # if invalid == 0:
          <div id="${fileID+'_'+lineNum}" class="comment-tree-div">
              ${commentHTML}
              # if not is_finished and not review_locked and not not_allowed:
              <div class="buttons">
                  <input type="button" name="addcomment" value="Add New Comment"
                         id="${'addcomment-view'+lineNum}"/>
                  <input type="hidden" name="fileid" value="" id="${'comment-fileid-view'+lineNum}"/>
                  <input type="hidden" name="line" value="" id="${'comment-line-view'+lineNum}" />
              </div>
              # endif
              # if is_finished or review_locked or not_allowed:
              <p class="help">
                  This review is locked or you are not allowed to add any comments.
              </p>
              # endif
          </div>
        # elif invalid == 1:
          <span>Invalid Parameters</span>
        # elif invalid == 2:
          <span>Comment Text Blank</span>
        # elif invalid == 3:
          <span>Invalid Action Type</span>
        # elif invalid == 4:
          <span>Invalid Permission</span>
        # elif invalid == 'closed':
          <span>Review already closed</span>
        # elif invalid == 5:
          <div id="${fileID+'_'+lineNum}">
                <table width="100%" id="addCommentTable">
                  <tr>
                    <td align="center">
                      <textarea cols="31" rows="6" id="addCommentText"></textarea>
                    </td>
                  </tr>
                  <tr height="3px">
                    <td> </td>
                  </tr>
                  <tr>
                    <td>&nbsp;&nbsp;Attach Code Sample <input type="checkbox" onclick="showHideAttachFile();" value="Attach Code Sample" id="attachFileCheckbox" /></td>
                  </tr>
                  <tr height="5px">
                    <td> </td>
                  </tr>
                  <tr>
                    <td align="right">
                <form action="${href.peerReviewCommentCallback()}" method="post" id="HiddenCommentForm" name="HiddenCommentForm" enctype="multipart/form-data">
                  <input type="hidden" value="addComment" id="actionType" name="actionType" />
                  <input type="hidden" value="" id="IDFile" name="IDFile" />
                  <input type="hidden" value="" id="LineNum" name="LineNum" />
                  <input type="hidden" value="" id="IDParent" name="IDParent" />
                  <input type="hidden" value="" id="Text" name="Text" />
                  <input size="25" type="file" value="" id="FileUp" name="FileUp" style="display:none;" />
                  <span id="FileUpCompanion" style="display:none;">&nbsp;</span>
                </form>
                    </td>
                  </tr>
                  <tr>
                      <td align="right" colspan="2" id="AddCommentButtonArea"></td>
                  </tr>
                </table>
          </div>
        # endif
    </div>

