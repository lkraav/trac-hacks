<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">
    <xi:include href="layout.html" />
    <head>
        <title>Search Code Reviews</title>
    </head>
    <body>
        <div id="content" class="trac-content borderless">
            <h1>Code Review Search</h1>

            <form id="searchReview" action="${href.peerReviewSearch()}" method="get">
                <fieldset>
                    <div>
                        <label>Code Review Name:
                          <input id="name" name="CodeReviewName" size="25" value="" type="text" />
                        </label>
                    </div>
                    <div>
                        <label>Reviews after date -
                            <select size="1" name="DateMonth" id="Month"
                                    onchange="resetDays(document.getElementById('Month').options[document.getElementById('Month').selectedIndex].value,
                                    document.getElementById('Year').options[document.getElementById('Year').selectedIndex].value)">
                                <option value="0">Select...</option>
                                <option value="01">January</option>
                                <option value="02">February</option>
                                <option value="03">March</option>
                                <option value="04">April</option>
                                <option value="05">May</option>
                                <option value="06">June</option>
                                <option value="07">July</option>
                                <option value="08">August</option>
                                <option value="09">September</option>
                                <option value="10">October</option>
                                <option value="11">November</option>
                                <option value="12">December</option>
                            </select>
                            <span id="DaySpan">
                                <select size="1" name="DateDay1" id="Day" onchange="setDateIndex();">
                                    <option value="0" selected="selected">Select...</option>
                                </select>
                            </span>
                            <select size="1" name="DateYear" id="Year"
                                    onchange="resetDays(document.getElementById('Month').options[document.getElementById('Month').selectedIndex].value,
                                    document.getElementById('Year').options[document.getElementById('Year').selectedIndex].value)">
                                <option selected="selected" value="0">Select...</option>
                                <option py:for="item in years" value="${item}">${item}</option>
                            </select>
                        </label>
                    </div>

                    <div>
                        <label>
                            Status -
                            <select size="1" name="Status" id="status">
                                <option value="Select...">Select...</option>
                                <option value="new">Open for review (new)</option>
                                <option value="reviewed">Reviewed</option>
                                <option value="approved">Approved</option>
                                <option value="disapproved">Disapproved</option>
                                <option value="Closed">Closed (obsolete)</option>
                            </select>
                        </label>
                    </div>

                    <div>
                        <label>
                            Author -
                            <select size="1" name="Author" id="author">
                                <option>Select...</option>
                                <option py:for="item in users" value="${item}">${authorinfo(item)}</option>
                            </select>
                        </label>
                    </div>

                    <div class="buttons">
                        <input type="hidden" name="doSearch" value="yes" />
                        <!-- used by javascript to get the current day selected -->
                        <input type="hidden" name="DateDay" value="0" id="dayHolder" />
                        <input value="Search" type="submit" />
                    </div>
                </fieldset>
            </form>
            <py:if test="doSearch == 'yes'">
                <h2>Search Results</h2>
                <table class="listing" id="myreviewlist">
                    <thead>
                        <tr>
                            <th>Review</th>
                            <th>Author</th>
                            <th>Status</th>
                            <th>Name</th>
                            <th>Date Opened</th>
                            <th>Date Finished</th>
                        </tr>
                    </thead>
                    <tbody py:with="cls=cycle(('odd', 'even'))" id = "myfilebody">
                        <py:for each="item in results">
                            <tr py:if="item[2] != ''" class="${cls.next()}">
                                <td><a href="${href.peerreviewview(item[0])}">${item[0]}</a></td>
                                <td><a href="${href.peerreviewview(item[0])}">${authorinfo(item[1])}</a></td>
                                <td><a href="${href.peerreviewview(item[0])}">${item[2]}</a></td>
                                <td><a href="${href.peerreviewview(item[0])}">${item[4]}</a></td>
                                <td><a href="${href.peerreviewview(item[0])}">${item[3]}</a></td>
                                <td><a href="${href.peerreviewview(item[0])}">${item[5]}</a></td>
                            </tr>
                                <tr py:if="item[2] == ''">
                                <td>${item[0]}</td>
                                <td>${authorinfo(item[1])}</td>
                                <td>${item[2]}</td>
                                <td>${item[4]}</td>
                                <td>${item[3]}</td>
                                <td>${item[5]}</td>
                            </tr>
                        </py:for>
                    </tbody>
                </table>
            </py:if>
        </div>
    </body>
</html>
