{#
  Copyright (C) 2021 Cinc
  Copyright (C) 2015-2017 Ryan Ollos
  Copyright (C) 2012-2013 Olemis Lang
  Copyright (C) 2008-2009 Noah Kantrowitz
  Copyright (C) 2008 Christoper Lenz
  Copyright (C) 2007-2008 Alec Thomas

  This software is licensed as described in the file COPYING, which
  you should have received as part of this distribution.
#}
# extends 'layout.html'
<!DOCTYPE html>
<html>
  <head>
    <title>
      # block title
      Dozer: Types
      ${ super() }
      # endblock title
    </title>
    # block head
    ${ super() }
    <style type='text/css'>
      .typecount {
          border: 1px dashed #CCCCCC;
          padding: 0.5em;
          margin: 2px;
          font: 10pt Arial, sans-serif;
          vertical-align: middle;
          float: left;
          width: 30%%;
      }

      .typecount p {
        margin: 0;
      }

      .chart {
          background-color: white;
          padding: 0.25em;
          margin: 0;
      }

      .sparkline {
        display: none;
        padding: 5px 0;
      }
    </style>
    # endblock head
  </head>
  <body>
  # block content
    <h1><a href="${req.href.developer('dozer')}">Dozer</a>: Types</h1>

    <div id="output">
      ## for typename, hist in sorted(history.iteritems()):
      # for typename, hist in history:
      # set maxhist = hist|max
      # if maxhist >= req.args.get('floor', 0)
      ##   ${','.join([str(n) for n in hist])}
      #    set hist = hist|map('string')|list
      #    set val = ','.join(hist)
      <div class="typecount">
        <p>${typename}</p>
        <p class="chart"><span class="sparkline">${val}</span></p>
        <p>Min: ${hist|min} Cur: ${hist[-1]} Max: ${hist|max}
         <a href="${href.developer('dozer', 'trace', typename)}">TRACE</a></p>
       </div>
      # endif
      # endfor
    </div>
  # endblock content
  </body>
</html>
