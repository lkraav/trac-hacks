Refer to http://trac-hacks.swapoff.org/wiki/WorkFlowPatch for details.
