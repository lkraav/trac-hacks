= Trac Installation Guide for 0.11 = 
[[TracGuideToc]]

  '''NOTE: this page is now for 0.11, which will be released soon. For installing previous Trac versions, please refer to wiki:0.10/TracInstall.'''

Trac is written in the Python programming language and needs a database, [http://sqlite.org/ SQLite], [http://www.postgresql.org/ PostgreSQL], or [http://mysql.com/ MySQL]. For HTML rendering, Trac uses the [http://genshi.edgewall.org Genshi] templating system.

What follows are generic instructions for installing and setting up Trac and its requirements. While you can find instructions for installing Trac on specific systems at TracInstallPlatforms on the main Trac site, please be sure to '''first read through these general instructions''' to get a good understanding of the tasks involved.

== Short - Install a released version ==
For the quick install, make sure you have [http://python.org Python-2.5], [http://peak.telecommunity.com/DevCenter/EasyInstall#installing-easy-install easy_install] and SQlite-3.3.4 installed (or above).
{{{
sudo easy_install Pygments
sudo easy_install Genshi
sudo easy_install Trac
}}}

== Requirements - also older versions possible ==

To install Trac, the following software packages must be installed:

 * [http://www.python.org/ Python], version >= 2.3
   * if using mod_python together with xml-related things, use python-2.5. expat is namespaced there and does not cause apache to crash any more(see [http://www.dscpl.com.au/wiki/ModPython/Articles/ExpatCausingApacheCrash here] for details).
   * For RPM-based systems you might also need the `python-devel` and `python-xml` packages.
   * See instructions in ["TracOnWindows/Python2.5"]
 * [http://peak.telecommunity.com/DevCenter/setuptools setuptools], version >= 0.6
 * [http://genshi.edgewall.org/wiki/Download Genshi], version >= 0.3.6
 * You also need a database system and the corresponding python drivers for it.
   The database can be either SQLite, PostgreSQL or ''MySQL (experimental)''.
 * optional if some plugins require it: [http://www.clearsilver.net/ ClearSilver]

=== 对SQLite ===

 * [http://www.sqlite.org/ SQLite], 最好版本3.3.4以上.
 * 如果没有使用Python-2.5: [http://pysqlite.org/ PySQLite], 版本1.x (对SQLite 2.x)或版本2.x (对SQLite 3.x). 详情请见[http://trac.edgewall.org/wiki/PySqlite PySqlite]

'' 注意:0.9c版之前的Tra不能与PySQLite2.x一起运行. 如果你打算使用源代码库中'contrib'节的'trac-post-commit-hook.py'脚本, Trac 0.9+/SQLite 3.x可能需要PySQLite 2.x.''

''注意: Mac OS X的使用者请注意, Apple提供的SQLite包括额外的代码来支持像AFP或SMB的网络文件系统的文件锁定. 当前版本(3.3.6)中没有包含该特性. 因此, 如果你从源代码中自己构建SQLite, 在这些文件系统上SQLite无法正常运行. 它会有类似"{{{数据库被锁定}}}"的错误. [http://www.alastairs-place.net/2006/07/sqlite_and_mac/ 补丁](在3.3.6版本上可用的, 基于Apple代码). 如果你不想用该补丁, 你最好使用Apple提供的版本, 目前是3.1.3版本.''

=== 对PostgreSQL ===

 * [http://www.postgresql.org/ PostgreSQL]
 * [http://initd.org/projects/psycopg2 psycopg2] 或 [http://pypgsql.sourceforge.net/ pyPgSQL]

=== 对MySQL ===

'''Warning''': MySQL support is currently ''still'' experimental. That means it works for some people, but several issues remain, in particular regarding the use of unicode and the key length in the repository cache. See MySqlDb for more detailed informations.

 * [http://mysql.com/ MySQL], version 4.1 or later
 * [http://sf.net/projects/mysql-python MySQLdb], version 1.2.1 or later

=== Optional Requirements ===

==== 版本控制系统 ====

'''Please note:''' if using Subversion, Trac must be installed on the '''same machine'''. Remote repositories are currently not supported.

 * [http://subversion.tigris.org/ SVN], 版本 >= 1.0. (推荐: 1.2.4, 1.3.2 or 1.4.2) 和 and the '''''corresponding''''' Python bindings. For troubleshooting, check TracSubversion
   * Trac使用SVN发行版中的[http://www.swig.org/ SWIG]绑定, 而不是 [http://pysvn.tigris.org/ PySVN](有时会和标准的SWIG绑定混淆).
   * 如果SVN在没有SWIG绑定的情况下已经安装好了, 你需要''re-configure'' SVN, 并''makn swig-py, make install-swig-py''.
   * There are [http://subversion.tigris.org/servlets/ProjectDocumentList?folderID=91 pre-compiled bindings] available for win32. 
 * Support for other version control systems is provided via third-parties. See PluginList and VersioningSystemBackend.

==== Web Server ====
 * A CGI-capable web server (see TracCgi), or
 * a [http://www.fastcgi.com/ FastCGI]-capable web server (see TracFastCgi), or
 * [http://httpd.apache.org/ Apache] with [http://www.modpython.org/ mod_python 3.1.3+] (see TracModPython)
    * When installing mod_python the development versions of Python and Apache are required (actually the libraries and header files)
 * [http://httpd.apache.org/ Apache] with [http://code.google.com/p/modwsgi/ mod_wsgi] (see [wiki:TracModWSGI])
    * While mod_wsgi is very new and somewhat experimental, this should work with Apache 1.3, 2.0 or 2.2 and promises to deliver more performance than using mod_python.

For those stuck with Apache 1.3, it is also possible to get Trac working with [http://www.modpython.org/ mod_python 2.7] (see [wiki:TracModPython2.7 TracModPython2.7]). This guide hasn't been updated since 0.84, so it may or may not work.

==== Other Python Utilities ====
 * [http://docutils.sourceforge.net/ docutils], version >= 0.3.9 for WikiRestructuredText.
 * [http://pygments.pocoo.org Pygments] for [wiki:TracSyntaxColoring syntax highlighting], also [http://silvercity.sourceforge.net/ SilverCity] and/or [http://gnu.org/software/enscript/enscript.html Enscript] may still be used.
    * Note that !SilverCity 0.9.6 has a [http://sourceforge.net/tracker/index.php?func=detail&aid=1424436&group_id=45693&atid=443739 bug] that breaks Python syntax highlighting in Trac. Until an update is made available, we recommend using version 0.9.5.
 * [http://pytz.sf.net pytz] to get a complete list of time zones, otherwise Trac will fall back on a shorter list from an internal time zone implementation.

'''注意''': 这些依赖组件的各种版本不一定能互换, 所以请注意上面提到的版本号. 如果你遇到问题, 在[http://projects.edgewall.com/trac/wiki/MailingList 邮件列表]或者 [http://projects.edgewall.com/trac/wiki/IrcChannel IrcChannel]中提问前, 请先仔细检查所有依赖组件. 

Please refer to the documentation of these packages to find out how they are best installed. In addition, most of the [wiki:TracInstallPlatforms platform-specific instructions] also describe the installation of the dependencies. Keep in mind however that the information there ''probably concern older versions of Trac than the one you're installing'' (there are even some pages that are still talking about Trac 0.8!).

== Installing Trac ==

One way to install Trac is using `setuptools`.
With setuptools you can install Trac from the subversion repository; for example,
to install release version 0.11 do:
{{{
easy_install http://svn.edgewall.com/repos/trac/tags/trac-0.11
}}}

But of course the python-typical setup at the top of the source directory also works:
{{{
$ python ./setup.py install
}}}

''注意:你需要root权限.''

这会将python源代码编译为字节码, 并安装在你的Python安装的`site-packages`目录中.
`cgi-bin`, `templates`, `htdocs`, `wiki-default`和`wiki-macros`目录都会复制到`$prefix/share/trac/`. `conf`和`plugins`子目录也创建在`$prefix/share/trac/` (''自 [milestone:0.10]'')之下.

该脚本还会安装[wiki:ZhTracAdmin trac-admin]命令行工具, 用来创建和维护[wiki:ZhTracEnvironment Trac环境]和独立服务器[wiki:ZhTracStandalone tracd].

=== 高级选项 ===

要自定义Trac安装位置, 或查看其他高级安装选项, 运行:
{{{
easy_install --help
}}}

详细信息请参见[http://docs.python.org/inst/inst.html 安装Python模块].

你可能对以下命令感兴趣:
{{{
easy_install --prefix=/path/to/installdir
}}}

== 创建一个项目环境 ==

[wiki:ZhTracEnvironment Trac环境]是Trac存储像wiki页, 传票, 报表, 设置等的信息的后端存储. 环境基本上是一个目录, 包含了一个可读的配置文件和各式的其他文件及目录.

用[wiki:ZhTracAdmin trac-admin]来创建一个新的环境:

{{{
$ trac-admin /path/to/myproject initenv
}}}

[wiki:ZhTracAdmin trac-admin]会提示你一些创建环境所需的信息, 例如项目名称, 类型和现有[wiki:ZhTracEnvironment#SourceCodeRepository SVN仓库]的路径, [wiki:ZhTracEnvironment#DatabaseConnectionStrings 数据库连接字符串], 等等. 如果你不确定其中某个选项, 就把它空着而使用默认值. 只要你安装了SQLite, 数据库连接字符串都会有作用. 将访问源代码仓库的路径设为空, 会使所有与版本控制有关的功能都失效. 但是当基本系统运行时, 你仍然可以将其添加进来.

还要注意, 稍后可以通过直接编辑[wiki:ZhTracIni Trac配置]来更改此处你指定的值.

'' 注意:Web服务器运行用户帐号需要拥有环境目录及里面所有文件的写权限.''

  chown -R apache.apache /path/to/myproject

== 运行独立服务器 ==

创建了一个Trac环境后, 你可以运行独立服务器[wiki:ZhTracStandalone tracd]轻松地尝试Web界面:
{{{
$ tracd --port 8000 /path/to/myproject
}}}

然后, 启动一个浏览器并访问`http://localhost:8000/`. 你将获得tracd中所有环境的简单列表. 点击链接到你刚创建的环境, 你会看到Trac已经能用了.

== 在Web服务器上运行Trac ==

Trac提供了三种方法来连接到一个真实的Web服务器: [wiki:ZhTracCgi CGI], [wiki:ZhTracFastCgi FastCGI] 和[wiki:ZhTracModPython mod_python]. 如果想有出色的性能, 建议你使用FastCGI或mod_python.

Trac provides three options for connecting to a 芒聙聹real芒聙聺 web server: [wiki:TracCgi CGI], [wiki:TracFastCgi FastCGI] and [wiki:TracModPython mod_python]. For decent performance, it is recommended that you use either FastCGI or mod_python.

If you're not afraid of running development code, you can also try running Trac on [wiki:TracModWSGI mod_wsgi]. This should deliver even better performance than mod_python, but the module is not considered stable just yet.

== Configuring Authentication ==

The process of adding, removing, and configuring user accounts for authentication depends on the specific way you run Trac. The basic procedure is described in the [wiki:TracCgi#AddingAuthentication "Adding Authentication"] section on the TracCgi page. To learn how to setup authentication for the frontend you're using, please refer to one of the following pages:

 * TracStandalone if you use the standalone server, `tracd`.
 * TracCgi if you use the CGI or FastCGI methods.
 * TracModPython if you use the mod_python method.

== 使用Trac ==

如果你创建了你的Trac站点并在运行它, 你应该能浏览SVN仓库, 创建传票, 查看时间线索, 等等.

请记住, 匿名用户(没有注册的用户)默认可以使用大多数的功能, 但不是全部. 你需要配置验证, 并为通过验证的用户提供额外的[wiki:ZhTracPermissions 权限], 以使他们可以看到全部功能.

'' 享受吧! ''

[http://projects.edgewall.com/trac/wiki/TracTeam Trac团队]

----
原文版本: TracInstall[[BR]]
相关信息: [ZhTracGuide Trac导览], [ZhTracCgi TracCgi], [ZhTracFastCgi TracFastCgi], [ZhTracModPython TracModPython], [ZhTracUpgrade Trac升级], [ZhTracPermissions Trac权限][[BR]]
See also: TracGuide, TracCgi, TracFastCgi, TracModPython, TracUpgrade, TracPermissions
