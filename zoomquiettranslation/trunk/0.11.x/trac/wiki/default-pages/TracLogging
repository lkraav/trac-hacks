= Trac Logging =
[[TracGuideToc]]

Trac支持使用与Python自带的标准[http://docs.python.org/lib/module-logging.html 日志模块]来记录系统消息.

Logging is configured in the `[logging]` section in [wiki:TracIni#logging-section trac.ini].

== 支持的日志记录方法 ==

记录日志的方法通过使用`log_type`配置选项来设置, 配置选项采用了下列的某个值:

 '''none'':: 禁止所有的日志消息.
 '''file''':: 将消息记录到一个[wiki:ZhTracIni trac.ini]中log_file`选项指定的文件中.
 '''stderr''':: 到控制台输出所有的日志(只对[wiki:ZhTracStandalone tracd]起作用).
 '''syslog''':: (UNIX)通过命名管道`/dev/log`发送消息到本地的syslogd .
 '''eventlog''':: (Windows)使用系统的NT事件日志为Trac记录日志. 

== 日志等级 ==

日志消息的详细程度可通过用[wiki:ZhTracIni trac.ini]中的''log_level''指令来进行设置. 日志等级定义了一个需要记录的消息所需的最低紧急等级. 这些等级有:

 '''CRITICAL''':: 只记录最重要的错误(一般是致命错误).
 '''ERROR''':: 记录失败, bug和错误. 
 '''WARN''':: 记录警告, 不中断的事件等.
 '''INFO''':: 诊断信息, 关于所有进程的日志信息.
 '''DEBUG''':: Trace消息, profiling等等.

== Log Format ==

Starting with Trac 0.10.4 (see #2844), it is possible to set the output format for log entries. This can be done through the `log_format` option in [wiki:TracIni#logging-section trac.ini]. The format is a string which can contain any of the [http://docs.python.org/lib/node422.html Python logging Formatter variables]. Additonally, the following Trac-specific variables can be used:
 '''$(basename)s''':: The last path component of the current environment.
 '''$(path)s''':: The absolute path for the current environment.
 '''$(project)s''':: The originating project's name.

Note that variables are identified using a dollar sign (`$(...)s`) instead of percent sign (`%(...)s`).

The default format is:
{{{
log_format = Trac[$(module)s] $(levelname)s: $(message)s
}}}

In a multi-project environment where all logs are sent to the same place (e.g. `syslog`), it makes sense to add the project name. In this example we use `basename` since that can generally be used to identify a project:
{{{
log_format = Trac[$(basename)s:$(module)s] $(levelname)s: $(message)s
}}}

----
原文版本: TracLogging[[BR]]
相关信息: [ZhTracIni Trac配置], [ZhTracGuide Trac导览], [ZhTracEnvironment Trac环境][[BR]]
See also: TracIni, TracGuide, TracEnvironment
